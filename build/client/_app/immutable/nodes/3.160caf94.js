import{S as R,i as J,s as C,k as v,a as V,l as E,m as w,h as g,c as S,n as h,T as A,b as H,D as _,E as N,R as P,q as O,r as F,J as Y,O as G,X as ce,w as me,Y as de,y as T,z as L,p as Z,A as z,Z as pe,u as Q,g as y,d as D,B,f as j,U as K,W as x,V as ge,_ as he,$ as _e,P as W,Q as be,v as q}from"../chunks/index.4d1394c0.js";import{p as ve}from"../chunks/parse.bee59afc.js";import{j as Ee,k as we}from"../chunks/singletons.e4110553.js";import{q as U,f as ie,s as se}from"../chunks/index.b5244028.js";import{t as oe,c as M,u as ke}from"../chunks/store.4567397c.js";import{A as fe,B as ue}from"../chunks/Button.7906048b.js";const ye=Ee("invalidate_all");function $e(a){return we.apply_action(a)}function Ae(a){const e=JSON.parse(a);return e.data&&(e.data=ve(e.data)),e}function ee(a){return HTMLElement.prototype.cloneNode.call(a)}function De(a,e=()=>{}){const t=async({action:i,result:r,reset:l=!0,invalidateAll:s=!0})=>{r.type==="success"&&(l&&HTMLFormElement.prototype.reset.call(a),s&&await ye()),(location.origin+location.pathname===i.origin+i.pathname||r.type==="redirect"||r.type==="error")&&$e(r)};async function n(i){var b,p,k,I;if(((b=i.submitter)!=null&&b.hasAttribute("formmethod")?i.submitter.formMethod:ee(a).method)!=="post")return;i.preventDefault();const l=new URL((p=i.submitter)!=null&&p.hasAttribute("formaction")?i.submitter.formAction:ee(a).action),s=new FormData(a),o=(k=i.submitter)==null?void 0:k.getAttribute("name");o&&s.append(o,((I=i.submitter)==null?void 0:I.getAttribute("value"))??"");const f=new AbortController;let c=!1;const m=await e({action:l,cancel:()=>c=!0,controller:f,get data(){return s},formData:s,get form(){return a},formElement:a,submitter:i.submitter})??t;if(c)return;let d;try{const $=await fetch(l,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:s,signal:f.signal});d=Ae(await $.text()),d.type==="error"&&(d.status=$.status)}catch($){if(($==null?void 0:$.name)==="AbortError")return;d={type:"error",error:$}}m({action:l,get data(){return s},formData:s,get form(){return a},formElement:a,update:$=>t({action:l,result:d,reset:$==null?void 0:$.reset,invalidateAll:$==null?void 0:$.invalidateAll}),result:d})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",n)}}}function He(a){let e,t,n,i;return{c(){e=v("div"),t=v("span"),n=V(),i=v("span"),this.h()},l(r){e=E(r,"DIV",{class:!0});var l=w(e);t=E(l,"SPAN",{class:!0}),w(t).forEach(g),n=S(l),i=E(l,"SPAN",{class:!0}),w(i).forEach(g),l.forEach(g),this.h()},h(){h(t,"class","absolute inline-flex h-full w-full animate-ping rounded-full bg-prompt-orange opacity-75"),A(t,"bg-prompt-orange",a[0]==="orange"&&a[1]===!1),A(t,"bg-prompt-blue",a[0]==="blue"&&a[1]===!1),h(i,"class","relative inline-flex h-12 w-12 rounded-full"),A(i,"bg-prompt-orange",a[0]==="orange"&&a[1]===!1),A(i,"bg-prompt-blue",a[0]==="blue"&&a[1]===!1),h(e,"class","relative flex h-12 w-12 items-center justify-center")},m(r,l){H(r,e,l),_(e,t),_(e,n),_(e,i)},p(r,[l]){l&3&&A(t,"bg-prompt-orange",r[0]==="orange"&&r[1]===!1),l&3&&A(t,"bg-prompt-blue",r[0]==="blue"&&r[1]===!1),l&3&&A(i,"bg-prompt-orange",r[0]==="orange"&&r[1]===!1),l&3&&A(i,"bg-prompt-blue",r[0]==="blue"&&r[1]===!1)},i:N,o:N,d(r){r&&g(e)}}}function Ie(a,e,t){let n,i;return P(a,oe,r=>t(0,n=r)),P(a,M,r=>t(1,i=r)),[n,i]}class Ve extends R{constructor(e){super(),J(this,e,Ie,He,C,{})}}function Se(a){let e,t,n,i,r,l,s;return{c(){e=v("div"),t=v("a"),n=O("↓"),i=V(),r=v("img"),this.h()},l(o){e=E(o,"DIV",{class:!0});var f=w(e);t=E(f,"A",{href:!0,target:!0,rel:!0,download:!0,class:!0});var c=w(t);n=F(c,"↓"),c.forEach(g),i=S(f),r=E(f,"IMG",{src:!0,alt:!0}),f.forEach(g),this.h()},h(){h(t,"href",a[1]),h(t,"target","_blank"),h(t,"rel","noopener noreferrer"),h(t,"download",""),h(t,"class","absolute right-4 top-4 rounded-lg bg-white px-3 py-2 opacity-0 transition duration-200 hover:bg-slate-200 group-hover:opacity-100"),Y(r.src,l=a[1])||h(r,"src",l),h(r,"alt",a[2]),h(e,"class","group relative h-max"),G(()=>a[3].call(e))},m(o,f){H(o,e,f),_(e,t),_(t,n),_(e,i),_(e,r),s=ce(e,a[3].bind(e))},p(o,[f]){f&2&&h(t,"href",o[1]),f&2&&!Y(r.src,l=o[1])&&h(r,"src",l),f&4&&h(r,"alt",o[2])},i:N,o:N,d(o){o&&g(e),s()}}}function Te(a,e,t){let{src:n}=e,{alt:i}=e,{clientHeight:r}=e;function l(){r=this.clientHeight,t(0,r)}return a.$$set=s=>{"src"in s&&t(1,n=s.src),"alt"in s&&t(2,i=s.alt),"clientHeight"in s&&t(0,r=s.clientHeight)},[r,n,i,l]}class Le extends R{constructor(e){super(),J(this,e,Te,Se,C,{src:1,alt:2,clientHeight:0})}}function ze(a){let e,t,n,i,r,l,s,o,f,c,u,m;function d(p){a[7](p)}let b={src:a[0],alt:"The AI generated result"};return a[3]!==void 0&&(b.clientHeight=a[3]),t=new Le({props:b}),me.push(()=>de(t,"clientHeight",d)),{c(){e=v("div"),T(t.$$.fragment),i=V(),r=v("div"),l=v("p"),s=O(a[1]),o=V(),f=v("p"),c=O("av "),u=O(a[2]),this.h()},l(p){e=E(p,"DIV",{class:!0});var k=w(e);L(t.$$.fragment,k),i=S(k),r=E(k,"DIV",{class:!0});var I=w(r);l=E(I,"P",{class:!0,style:!0});var $=w(l);s=F($,a[1]),$.forEach(g),o=S(I),f=E(I,"P",{class:!0});var X=w(f);c=F(X,"av "),u=F(X,a[2]),X.forEach(g),I.forEach(g),k.forEach(g),this.h()},h(){h(l,"class","overflow-y-auto font-redaction sm:mb-2 md:mb-5 md:text-2xl lg:text-5xl"),Z(l,"height",a[4]+"px"),h(f,"class","mt-auto text-xs md:text-base"),h(r,"class","flex h-full flex-col"),h(e,"class","grid max-h-screen-60 max-w-screen-80 grid-cols-2 gap-10 rounded-xl p-4 md:p-6 lg:p-8"),A(e,"bg-prompt-orange",a[5]==="orange"&&a[6]===!1),A(e,"bg-prompt-blue",a[5]==="blue"&&a[6]===!1),A(e,"bg-slate-900",a[6]===!0),A(e,"text-white",a[6]===!0)},m(p,k){H(p,e,k),z(t,e,null),_(e,i),_(e,r),_(r,l),_(l,s),_(r,o),_(r,f),_(f,c),_(f,u),m=!0},p(p,[k]){const I={};k&1&&(I.src=p[0]),!n&&k&8&&(n=!0,I.clientHeight=p[3],pe(()=>n=!1)),t.$set(I),(!m||k&2)&&Q(s,p[1]),(!m||k&16)&&Z(l,"height",p[4]+"px"),(!m||k&4)&&Q(u,p[2]),(!m||k&96)&&A(e,"bg-prompt-orange",p[5]==="orange"&&p[6]===!1),(!m||k&96)&&A(e,"bg-prompt-blue",p[5]==="blue"&&p[6]===!1),(!m||k&64)&&A(e,"bg-slate-900",p[6]===!0),(!m||k&64)&&A(e,"text-white",p[6]===!0)},i(p){m||(y(t.$$.fragment,p),m=!0)},o(p){D(t.$$.fragment,p),m=!1},d(p){p&&g(e),B(t)}}}function Be(a,e,t){let n,i,r;P(a,oe,u=>t(5,i=u)),P(a,M,u=>t(6,r=u));let{image:l}=e,{prompt:s}=e,{user:o=void 0}=e,f;function c(u){f=u,t(3,f)}return a.$$set=u=>{"image"in u&&t(0,l=u.image),"prompt"in u&&t(1,s=u.prompt),"user"in u&&t(2,o=u.user)},a.$$.update=()=>{a.$$.dirty&8&&t(4,n=f*.8)},[l,s,o,f,n,i,r,c]}class Pe extends R{constructor(e){super(),J(this,e,Be,ze,C,{image:0,prompt:1,user:2})}}function te(a){let e,t,n,i,r;return{c(){e=v("form"),t=v("label"),n=v("textarea"),this.h()},l(l){e=E(l,"FORM",{id:!0,method:!0,class:!0});var s=w(e);t=E(s,"LABEL",{for:!0});var o=w(t);n=E(o,"TEXTAREA",{name:!0,class:!0}),w(n).forEach(g),o.forEach(g),s.forEach(g),this.h()},h(){h(n,"name","prompt"),h(n,"class","prompt-input svelte-j4dm41"),h(t,"for","prompt"),h(e,"id","promptForm"),h(e,"method","POST"),h(e,"class","h-full w-full px-6 pb-6 pt-14")},m(l,s){H(l,e,s),_(e,t),_(t,n),x(n,a[1]),i||(r=[ge(n,"input",a[5]),he(De.call(null,e,a[4]))],i=!0)},p(l,s){s&2&&x(n,l[1])},d(l){l&&g(e),i=!1,_e(r)}}}function re(a){let e,t,n,i;return t=new Ve({}),{c(){e=v("div"),T(t.$$.fragment)},l(r){e=E(r,"DIV",{});var l=w(e);L(t.$$.fragment,l),l.forEach(g)},m(r,l){H(r,e,l),z(t,e,null),i=!0},p(r,l){},i(r){i||(y(t.$$.fragment,r),n||G(()=>{n=W(e,ie,{delay:300,duration:1e3,y:25,opacity:0,easing:U}),n.start()}),i=!0)},o(r){D(t.$$.fragment,r),i=!1},d(r){r&&g(e),B(t)}}}function ae(a){let e,t,n,i;return t=new Pe({props:{image:a[2],prompt:a[1],user:a[3]}}),{c(){e=v("div"),T(t.$$.fragment)},l(r){e=E(r,"DIV",{});var l=w(e);L(t.$$.fragment,l),l.forEach(g)},m(r,l){H(r,e,l),z(t,e,null),i=!0},p(r,l){a=r;const s={};l&4&&(s.image=a[2]),l&2&&(s.prompt=a[1]),l&8&&(s.user=a[3]),t.$set(s)},i(r){i||(y(t.$$.fragment,r),n||G(()=>{n=W(e,ie,{delay:300,duration:1e3,y:25,opacity:0,easing:U}),n.start()}),i=!0)},o(r){D(t.$$.fragment,r),i=!1},d(r){r&&g(e),B(t)}}}function le(a){let e,t,n,i;return t=new fe({props:{$$slots:{default:[Oe]},$$scope:{ctx:a}}}),{c(){e=v("div"),T(t.$$.fragment)},l(r){e=E(r,"DIV",{});var l=w(e);L(t.$$.fragment,l),l.forEach(g)},m(r,l){H(r,e,l),z(t,e,null),i=!0},p(r,l){a=r;const s={};l&136&&(s.$$scope={dirty:l,ctx:a}),t.$set(s)},i(r){i||(y(t.$$.fragment,r),n&&n.end(1),i=!0)},o(r){D(t.$$.fragment,r),n=be(e,se,{duration:1e3,easing:U}),i=!1},d(r){r&&g(e),B(t),r&&n&&n.end()}}}function Oe(a){let e,t,n,i,r,l,s;return l=new ue({props:{label:"Generera bild",type:"submit",form:"promptForm"}}),{c(){e=v("div"),t=v("p"),n=O(a[3]),i=V(),r=v("div"),T(l.$$.fragment),this.h()},l(o){e=E(o,"DIV",{class:!0});var f=w(e);t=E(f,"P",{class:!0});var c=w(t);n=F(c,a[3]),c.forEach(g),f.forEach(g),i=S(o),r=E(o,"DIV",{class:!0});var u=w(r);L(l.$$.fragment,u),u.forEach(g),this.h()},h(){h(t,"class","text-lg text-slate-900"),h(e,"class","my-4 ml-4"),h(r,"class","ml-auto")},m(o,f){H(o,e,f),_(e,t),_(t,n),H(o,i,f),H(o,r,f),z(l,r,null),s=!0},p(o,f){(!s||f&8)&&Q(n,o[3])},i(o){s||(y(l.$$.fragment,o),s=!0)},o(o){D(l.$$.fragment,o),s=!1},d(o){o&&g(e),o&&g(i),o&&g(r),B(l)}}}function ne(a){let e,t,n,i;return t=new fe({props:{$$slots:{default:[Fe]},$$scope:{ctx:a}}}),{c(){e=v("div"),T(t.$$.fragment)},l(r){e=E(r,"DIV",{});var l=w(e);L(t.$$.fragment,l),l.forEach(g)},m(r,l){H(r,e,l),z(t,e,null),i=!0},p(r,l){a=r;const s={};l&128&&(s.$$scope={dirty:l,ctx:a}),t.$set(s)},i(r){i||(y(t.$$.fragment,r),n||G(()=>{n=W(e,se,{duration:1e3,easing:U}),n.start()}),i=!0)},o(r){D(t.$$.fragment,r),i=!1},d(r){r&&g(e),B(t)}}}function Fe(a){let e,t;return e=new ue({props:{label:"Starta nytt spel",type:"button",href:"/",class:"w-full"}}),{c(){T(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,i){z(e,n,i),t=!0},p:N,i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Me(a){let e,t,n,i,r,l,s,o=!a[0]&&a[2]==null&&te(a),f=a[0]&&re(),c=!a[0]&&a[2]!=null&&ae(a),u=!a[0]&&a[2]==null&&le(a),m=!a[0]&&a[2]!=null&&ne(a);return{c(){e=v("div"),t=v("div"),o&&o.c(),n=V(),f&&f.c(),i=V(),c&&c.c(),r=V(),u&&u.c(),l=V(),m&&m.c(),this.h()},l(d){e=E(d,"DIV",{class:!0});var b=w(e);t=E(b,"DIV",{class:!0});var p=w(t);o&&o.l(p),n=S(p),f&&f.l(p),i=S(p),c&&c.l(p),p.forEach(g),r=S(b),u&&u.l(b),l=S(b),m&&m.l(b),b.forEach(g),this.h()},h(){h(t,"class","flex h-full items-center justify-center"),h(e,"class","flex h-full flex-col")},m(d,b){H(d,e,b),_(e,t),o&&o.m(t,null),_(t,n),f&&f.m(t,null),_(t,i),c&&c.m(t,null),_(e,r),u&&u.m(e,null),_(e,l),m&&m.m(e,null),s=!0},p(d,[b]){!d[0]&&d[2]==null?o?o.p(d,b):(o=te(d),o.c(),o.m(t,n)):o&&(o.d(1),o=null),d[0]?f?b&1&&y(f,1):(f=re(),f.c(),y(f,1),f.m(t,i)):f&&(q(),D(f,1,1,()=>{f=null}),j()),!d[0]&&d[2]!=null?c?(c.p(d,b),b&5&&y(c,1)):(c=ae(d),c.c(),y(c,1),c.m(t,null)):c&&(q(),D(c,1,1,()=>{c=null}),j()),!d[0]&&d[2]==null?u?(u.p(d,b),b&5&&y(u,1)):(u=le(d),u.c(),y(u,1),u.m(e,l)):u&&(q(),D(u,1,1,()=>{u=null}),j()),!d[0]&&d[2]!=null?m?b&5&&y(m,1):(m=ne(d),m.c(),y(m,1),m.m(e,null)):m&&(q(),D(m,1,1,()=>{m=null}),j())},i(d){s||(y(f),y(c),y(u),y(m),s=!0)},o(d){D(f),D(c),D(u),D(m),s=!1},d(d){d&&g(e),o&&o.d(),f&&f.d(),c&&c.d(),u&&u.d(),m&&m.d()}}}function Ne(a,e,t){let n,i;P(a,M,c=>t(6,n=c)),P(a,ke,c=>t(3,i=c)),K(M,n=!0,n);let r=!1,l,s;const o=()=>(K(M,n=!1,n),t(0,r=!0),async({action:c,result:u})=>{let m=JSON.parse(JSON.stringify(u));m.status==200?(t(2,s=m.data.url.url),console.log(s),setTimeout(()=>{t(0,r=!1)},1e3)):(t(0,r=!1),alert("An error occurred, please try again."))});function f(){l=this.value,t(1,l)}return[r,l,s,i,o,f]}class Ue extends R{constructor(e){super(),J(this,e,Ne,Me,C,{})}}export{Ue as component};
